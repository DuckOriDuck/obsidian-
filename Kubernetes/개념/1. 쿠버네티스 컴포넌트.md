# 쿠버네티스 컴포넌트

1. **클러스터:** 쿠버네티스는 배포하면 클러스터를 얻는다. 클러스터는 노드라는 워커 머신의 집함임.
2. **워커 노드**: 워커 노드는 어플리케이션의 구성요소인 파드를 호스트함.
3. **컨트롤 플레인**: 컨트롤 플레인은 워커 노드와 클러스터 내 파드를 관리.(오케스트레이션 역할임)

![[Pasted image 20240823153120.png]]
# 컨트롤 플레인 컴포넌트
- 클러스터에 대한 전반적인 결정(스케줄링)을 수행하고 클러스터 이벤트를 감지하고 반응함.
- 컨트롤 플레인 컴포넌트는 클러스터 내 어떠한 머신에서든지 동작 가능. 그러나 간결성을 위해 구성 스크립트는 보통 머신 상에 모든 컨트롤 플레인 컴포넌트를 구동 시키고, 사용자 컨테이너는 해당 머신상에 등록하지 않음.
## kube-apiserver: 
- API 서버는 쿠버네티스 API를 노출하는 쿠버네티스 컨트롤 플레인 컴포넌트이다. 쿠버네티스 컨트롤 플레인의 프론트엔드라고 보면 된다.
- API 서버의 주요 구현은 kube-apiserver로 한다. kube-apiserver는 수평으로 확장되도록 디자인됐음. 더 많은 인스턴스를 배포해서 확장할 수 있다는 것.
## [[edcd]]: 
- 모든 클러스터 데이터를 담는 쿠버네티스 backend의 저장소로 사용되는 일관성-고가용성 key-value 저장소.
## kube-scheduler: 
- 노드가 배정되지 않은 새로 생성된 파드를 감지, 실행할 노드를 선택하는 컨트롤 플레인 컴포넌트.
- 스케줄링 결정을 위해 고려되는 요소는
	- 리소스에 대한 단일/전체 요구사항
	- 하드웨어/소프트웨어 정책적 제약
	- affinity, anti-affinity 명세, 데이터 지역성
	- workload간 간섭
	- 데드라인
	을 포함한다
## kube-controller-manager: 
- 다운된 노드가 없는지, 파드가 의도된 수를 유지하는지, 서비스와 파드가 연결돼있는지 등등 확인하고 적절한 조치를 취하는 역할을 하고있음
# node 컴포넌트
## kublet:
- 노드에서 컨테이너가 동작하도록 관리해주는 핵심요소
- 각 노드에서 pod를 생성하고 정상적으로 동작하는지 관리하는 역할
- 실제로 우리가 쿠버네티스의 워크로드를 관리하기 위해 내려지는 명령은 kublet을 통해 수행됨.
- pod 설정용 YAML 파일을 적용할 때 kube-apiserver로 전송되고, kublet으로 전달됨. 
- kublet에서는 이 YAML 파일을 통해 파드를 생성/변경하고, 명시노디 컨테이너들을 관리해줌.
## kube-proxy:
- 클러스터의 각 노드에서 실행되는 네트워크 프록시.
- 노드의 네트워크 규칙을 유지/관리함.
## container runtime:
- 파드에 포함된 컨테이너 실행을 실질적으로 담당하는 어플리케이션.
- 컨테이너 런타임은 쿠버네티스 구성 요소에 기본적으로 포함돼 있긴 한데, 특정 소프트웨어를 지칭하진 않고,
- 쿠버네티스가 컨테이너를 제어하기 위해 제공하는 CRI(Container Runtime Interface)를 준수하여 쿠버네티스와 함께 사용할 수 있는 외부 어플리케이션들을 의미함.
-   **containerd**, **CRI-O**등이 있음. [부가설명](https://post.naver.com/viewer/postView.naver?volumeNo=28882881&memberNo=36733075)\

# 애드온
- 애드온은 쿠버네티스 리소스(데몬셋, 디플로이먼트 등)을 이용하여 클러스터 기능을 구현함.
- 클러스터 단위의 기능을 제공하기 때문에 애드온에 대한 넹님스페이스 리소스는 kube-system 네임스페이스에 속함.[전체 확장 애드온 리스트](https://kubernetes.io/ko/docs/concepts/cluster-administration/addons/)
## DNS
- 절대적으로 요구되진 않는데 많은 예시에서 필요로 하기 때문에 쿠버네티스 클러스터는 클러스터 DNS를 갖춰야 함.
- 클러스터 DNS는 구성환경 내 다른 DNS 서버와 더불어 쿠버 서비스를 위해 DNS 레코드를 제공해주는 DNS 서버이다.
- 쿠버네티스에 의해 구동되는 컨테이너는 DNS 검색에서 이 DNS 서버를 자동으로 포함한다.
## UI
- 웹 기반 UI도 지원해준다.
## 컨테이너 리소스 모니터링
- 중앙 DB 내의 컨테이너들에 대한 포괄적인 시계열 매트릭스를 기록하고 그 데이터를 열람하기 위한 UI를 제공해줌.
## 클러스터-레벨 로깅
- 열람 인터페이스와 함께 중앙 로그 저장소에 컨테이너 로그를 저장하는 책임을 짐11111111111