# explanation
- 도커 컨테이너가 시작될 때, 어플리케이션이나 커맨드를 실행시킨다.
- 컨테이너는 그 이미지의 구성에서 실행가능한 스크립트나 파일을 전달받는다.
- 컨테이너는 주로 디폴트 설정으로 잘 실행 되지만, 원한다면 이 설정을 바꿀 수 있다.
- 예시로, 표준 포트에 연결돼있는 DB 컨테이너가 있고, 똑같은 데이터베이스 컨테이너의 새로은 인스턴스를 실행하고 싶으면, 기존 컨테이너와 충돌이 나지 않게 포트를 바꿔줘야 할 것이다.
- 아니면 컨테이너의 메모리를 늘려줘서 프로그램이 더 큰 연산을 위한 리소스를 사용할 수 있도록 해줄수도 있을 것.

## 네트워크 포트 오버라이딩
가끔 똑같은 설정의 DB를 테스트용과 개발용으로 나눠서 하고싶을 떄가 있다.
```
docker run -d -p HOST_PORT:CONTAINER_PORT postgres
```
- `docker run` 커맨드에서 `-p` 옵션을 사용해서 컨테이너 포트를 호스트 포트로 따로 매핑해줄 수 있다. -> 이렇게 해서 충돌 없이 여러개의 동일한 컨테이너 인스턴스를 띄울 수 있다.

## 환경변수 설정
- 이 옵션은 환경변수 `foo`를 컨테이너 안에 값 `bar`로 설정해준다.
```
docker run -e foo=bar postgres env
```

	♠ tip!
	 `.env` 파일을 사용하면 도커 컨테이너의 환경변수 여러개를 한번에 편하게 설정해줄 수 있다.
	  .env 파일을 사용하기 위해서는 --env-file 옵션을 docker run 명령어에 포함해주면 된다.
```
$ docker run --env-file .env postgres env
```

# 컨테이너의 리소스 할당 제한
`--memory`와 `--cpus` 플래그와 `docker run` 커맨드를 사용해서 CPU와 메모리 자원을 얼마나 사용할지 지정해줄 수 있다.
예시로, 파이썬 API 컨테이너가 지나치게 메모리를 잡아먹는것을 방지 하기 위해 메모리 제한을 걸어줄 수도 있다.
```cmd
docker run -e POSTGRES_PASSWORD=secret --memory="512m" --cpus="0.5" postgres
```
메모리 사용을 516 MB로 제한하고 CPU 할당량을 0.5로 설정하여 반 개으 ㅣ코어를 사용하게 한다.

	실시간 자원 소모량 모니터링 하기

`docker stats` 를 사용하여 작동중인 컨테이너들의 실시간 자원 소모량을 확인할 수 있다. 이 커맨드로 현재 할당된 리소스가 충분한지 부족한지 판단할 수 있다.
